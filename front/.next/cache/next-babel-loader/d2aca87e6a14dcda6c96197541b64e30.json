{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport AppLayout from '../components/AppLayout';\nimport Head from 'next/head';\nimport NicknameEditForm from '../components/NicknameEditForm';\nimport FollowingsList from '../components/FollowingsList';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWINGS_REQUEST } from '../reducers/user';\nimport Router from 'next/router';\nimport useSWR from 'swr';\nimport axios from 'axios';\nvar fetcher = function fetcher(url) {\n  return axios.get(url, {\n    withCredentials: true\n  }).then(function (result) {\n    return result.data;\n  });\n};\nvar Profile = function Profile() {\n  var dispatch = useDispatch();\n  var _useSelector = useSelector(function (state) {\n      return state.user;\n    }),\n    me = _useSelector.me;\n  var _useState = useState(3),\n    followersLimit = _useState[0],\n    setFollowersLimit = _useState[1];\n  var _useState2 = useState(3),\n    followingsLimit = _useState2[0],\n    setFollowingsLimit = _useState2[1];\n  var _useSWR = useSWR(\"http://localhost:3065/user/followers?limit=\".concat(followersLimit), fetcher),\n    followersData = _useSWR.data,\n    followerError = _useSWR.error;\n  var _useSWR2 = useSWR(\"http://localhost:3065/user/followings?limit=\".concat(followingsLimit), fetcher),\n    followingsData = _useSWR2.data,\n    followingError = _useSWR2.error;\n  useEffect(function () {\n    if (!(me && me.id)) {\n      Router.push('/');\n    }\n  }, [me && me.id]);\n  var loadMoreFollowings = useCallback(function () {\n    setFollowingsLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n  var loadMoreFollowers = useCallback(function () {\n    setFollowersLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n  if (!me) {\n    return '내정보 로딩중';\n  }\n  if (followerError || followingError) {\n    console.error(followerError || followingError);\n    return __jsx(\"div\", null, \"\\uD314\\uB85C\\uC789/\\uD314\\uB85C\\uC6CC \\uB85C\\uB529 \\uC911 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD569\\uB2C8\\uB2E4.\");\n  }\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"meta\", {\n    charSet: \"utf-8\"\n  }), __jsx(\"title\", null, \"My Profile | Pick-Me\")), __jsx(AppLayout, null, __jsx(NicknameEditForm, null), __jsx(FollowingsList, {\n    header: \"\\uD314\\uB85C\\uC789\",\n    data: followingsData,\n    onClickMore: loadMoreFollowings,\n    loading: !followingsData && !followingError\n  }), __jsx(FollowingsList, {\n    header: \"\\uD314\\uB85C\\uC6CC\",\n    data: followersData,\n    onClickMore: loadMoreFollowers,\n    loading: !followersData && !followerError\n  })));\n};\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}